!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.moltin={})}(this,function(t){"use strict";function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(t,e){var r=[];return null===e||0===e.length?[]:"string"==typeof e?[{type:t,id:e}]:(Array.isArray(e)&&(r=e.map(function(e){return{type:t,id:e}})),r)}function n(t){return 204===t.status?new Promise(function(e){e({status:t.status,ok:t.ok,json:"{}"})}):new Promise(function(e){return t.json().then(function(r){return e({status:t.status,ok:t.ok,json:r})})})}function o(t,e){if("limit"===t||"offset"===t)return"page"+e;if("filter"===t){return t+"="+Object.keys(e).map(function(t){return function(t,e){return Object.keys(e).map(function(r){var n=e[r];return t+"("+r+","+n+")"}).join(":")}(t,e[t])}).join(":")}return t+"="+e}function i(t,e){if(e.includes||e.sort||e.limit||e.offset||e.filter){return t+"?"+function(t){var e=t.includes,r=t.sort,n=t.limit,i=t.offset,s=t.filter,u={};return e&&(u.include=e),r&&(u.sort="("+r+")"),n&&(u.limit="[limit]="+n),i&&(u.offset="[offset]="+i),s&&(u.filter=s),Object.keys(u).map(function(t){return o(t,u[t])}).join("&")}(e)}return t}function s(t,e,r){void 0===e&&(e=null),void 0===r&&(r="cart_item");var n={type:r};return"cart_item"===r&&Object.assign(n,{id:t,quantity:parseInt(e,10)}),"promotion_item"===r&&Object.assign(n,{code:t}),n}function u(t){return t.split("").map(function(t){return"(?:"+t.toUpperCase()+"|"+t.toLowerCase()+")"}).join("")}function a(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&Array.prototype.splice.call(t,r,1)}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l(t,e){if(function(t){return"[object Function]"===A.call(t)}(t)&&(e=t,t=null),t=t||"en",!e)return P.getInstance(t);e(P.getInstance(t))}function p(t){return function(t,e){var r,n,o,i=""+t;if(0===i.length)return i;var s=i.toLowerCase().match(/\b\w+$/);if(s&&l().uncountables.indexOf(s[0])>-1)return i;for(var u=0,a=e.length;u<a;u++)if(r=e[u],n=r[0],o=r[1],i.match(n)){i=i.replace(n,o);break}return i}(t,l(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en").plurals)}var h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return f.iterable&&(e[Symbol.iterator]=function(){return e}),e}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function u(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function a(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(f.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(f.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(f.arrayBuffer&&f.blob&&y(t))this._bodyArrayBuffer=a(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!f.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!v(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=a(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},f.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},f.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(t,e){var r=(e=e||{}).body;if(t instanceof l){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new o(e.headers)),this.method=function(t){var e=t.toUpperCase();return m.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function h(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var f={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(f.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(t){return t&&DataView.prototype.isPrototypeOf(t)},v=ArrayBuffer.isView||function(t){return t&&d.indexOf(Object.prototype.toString.call(t))>-1};o.prototype.append=function(t,n){t=e(t),n=r(n);var o=this.map[t];this.map[t]=o?o+","+n:n},o.prototype.delete=function(t){delete this.map[e(t)]},o.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,n){this.map[e(t)]=r(n)},o.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},o.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},o.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},o.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},f.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this,{body:this._bodyInit})},c.call(l.prototype),c.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var t=new h(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];h.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new h(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=l,t.Response=h,t.fetch=function(t,e){return new Promise(function(r,n){var i=new l(t,e),s=new XMLHttpRequest;s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:function(t){var e=new o;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();e.append(n,o)}}),e}(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;r(new h(e,t))},s.onerror=function(){n(new TypeError("Network request failed"))},s.ontimeout=function(){n(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials&&(s.withCredentials=!0),"responseType"in s&&f.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}(self);var f="undefined"!=typeof self&&self||h,d=(f.fetch.bind(f),function(t,e){e={exports:{}},t(e,e.exports),e.exports}(function(t,r){t.exports=function(){function t(t){return"function"==typeof t}function r(){var t=setTimeout;return function(){return t(n,1)}}function n(){for(var t=0;t<E;t+=2){var e=S[t],r=S[t+1];e(r),S[t]=void 0,S[t+1]=void 0}E=0}function o(t,e){var r=arguments,n=this,o=new this.constructor(s);void 0===o[q]&&g(o);var i=n._state;return i?function(){var t=r[i-1];O(function(){return m(i,o,t,n._result)})}():d(n,o,t,e),o}function i(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(s);return c(e,t),e}function s(){}function u(t){try{return t.then}catch(t){return B.error=t,B}}function a(e,r,n){r.constructor===e.constructor&&n===o&&r.constructor.resolve===i?function(t,e){e._state===k?p(t,e._result):e._state===L?f(t,e._result):d(e,void 0,function(e){return c(t,e)},function(e){return f(t,e)})}(e,r):n===B?(f(e,B.error),B.error=null):void 0===n?p(e,r):t(n)?function(t,e,r){O(function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?c(t,r):p(t,r))},function(e){n||(n=!0,f(t,e))},t._label);!n&&o&&(n=!0,f(t,o))},t)}(e,r,n):p(e,r)}function c(t,e){t===e?f(t,new TypeError("You cannot resolve a promise with itself")):!function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}(e)?p(t,e):a(t,e,u(e))}function l(t){t._onerror&&t._onerror(t._result),y(t)}function p(t,e){t._state===R&&(t._result=e,t._state=k,0!==t._subscribers.length&&O(y,t))}function f(t,e){t._state===R&&(t._state=L,t._result=e,O(l,t))}function d(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+k]=r,o[i+L]=n,0===i&&t._state&&O(y,t)}function y(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?m(r,n,o,i):o(i);t._subscribers.length=0}}function v(){this.error=null}function m(e,r,n,o){var i=t(n),s=void 0,u=void 0,a=void 0,l=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(t){return D.error=t,D}}(n,o))===D?(l=!0,u=s.error,s.error=null):a=!0,r===s)return void f(r,new TypeError("A promises callback cannot return that same promise."))}else s=o,a=!0;r._state!==R||(i&&a?c(r,s):l?f(r,u):e===k?p(r,s):e===L&&f(r,s))}function g(t){t[q]=N++,t._state=void 0,t._result=void 0,t._subscribers=[]}function b(t,e){this._instanceConstructor=t,this.promise=new t(s),this.promise[q]||g(this.promise),$(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&p(this.promise,this._result))):f(this.promise,new Error("Array Methods must be provided an Array"))}function w(t){this[q]=N++,this._result=this._state=void 0,this._subscribers=[],s!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof w?function(t,e){try{e(function(e){c(t,e)},function(e){f(t,e)})}catch(e){f(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var _=void 0;_=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var $=_,E=0,T=void 0,A=void 0,O=function(t,e){S[E]=t,S[E+1]=e,2===(E+=2)&&(A?A(n):I())};var x="undefined"!=typeof window?window:void 0,j=x||{},P=j.MutationObserver||j.WebKitMutationObserver,U="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),C="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;var S=new Array(1e3);var I=void 0;I=U?function(){return process.nextTick(n)}:P?function(){var t=0,e=new P(n),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():C?function(){var t=new MessageChannel;return t.port1.onmessage=n,function(){return t.port2.postMessage(0)}}():void 0===x&&"function"==typeof e?function(){try{var t,o=(t=e)("vertx");return T=o.runOnLoop||o.runOnContext,function(){if(void 0!==T)return function(){T(n)};return r()}()}catch(t){return r()}}():r();var q=Math.random().toString(36).substring(16);var R=void 0,k=1,L=2,B=new v;var D=new v;var N=0;b.prototype._enumerate=function(t){for(var e=0;this._state===R&&e<t.length;e++)this._eachEntry(t[e],e)},b.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===i){var c=u(t);if(c===o&&t._state!==R)this._settledAt(t._state,e,t._result);else if("function"!=typeof c)this._remaining--,this._result[e]=t;else if(r===w){var l=new r(s);a(l,t,c),this._willSettleAt(l,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},b.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===R&&(this._remaining--,t===L?f(n,r):this._result[e]=r),0===this._remaining&&p(n,this._result)},b.prototype._willSettleAt=function(t,e){var r=this;d(t,void 0,function(t){return r._settledAt(k,e,t)},function(t){return r._settledAt(L,e,t)})};w.all=function(t){return new b(this,t).promise},w.race=function(t){var e=this;return new e($(t)?function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},w.resolve=i,w.reject=function(t){var e=new this(s);return f(e,t),e},w._setScheduler=function(t){A=t},w._setAsap=function(t){O=t},w._asap=O,w.prototype={constructor:w,then:o,catch:function(t){return this.then(null,t)}};return w.polyfill=function(){var t=void 0;if(void 0!==h)t=h;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=w},w.Promise=w,w}()}),function(){if("undefined"==typeof localStorage||null===localStorage){var t=require("node-localstorage").LocalStorage;this.localStorage=new t("./localStorage")}else this.localStorage=window.localStorage});d.prototype.set=function(t,e){return this.localStorage.setItem(t,e)},d.prototype.get=function(t){return this.localStorage.getItem(t)},d.prototype.delete=function(t){return this.localStorage.removeItem(t)};var y,v=h.crypto||h.msCrypto;if(v&&v.getRandomValues){var m=new Uint8Array(16);y=function(){return v.getRandomValues(m),m}}if(!y){var g=new Array(16);y=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),g[e]=t>>>((3&e)<<3)&255;return g}}for(var b=y,w=[],_=0;_<256;++_)w[_]=(_+256).toString(16).substr(1);var $=function(t,e){var r=e||0,n=w;return n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+"-"+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]+n[t[r++]]},E=function(t,e,r){var n=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||b)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[n+i]=o[i];return e||$(o)},T=function(t){this.config=t,this.storage=new d};T.prototype.authenticate=function(){var t=this.config,e=this.storage;if(!t.client_id)throw new Error("You must have a client_id set");if(!t.host)throw new Error("You have not specified an API host");var r={grant_type:t.client_secret?"client_credentials":"implicit",client_id:t.client_id};t.client_secret&&(r.client_secret=t.client_secret);var o=new Promise(function(e,o){fetch(t.protocol+"://"+t.host+"/"+t.auth.uri,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object.keys(r).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(r[t])}).join("&")}).then(n).then(function(t){t.ok&&e(t.json),o(t.json)}).catch(function(t){return o(t)})});return o.then(function(t){e.set("mtoken",t.access_token),e.set("mexpires",t.expires)}),o},T.prototype.send=function(t,e,r,o){var i=this;void 0===r&&(r=void 0),void 0===o&&(o=void 0);var s=this.config,u=this.storage;return new Promise(function(a,c){var l=function(){var i={Authorization:"Bearer: "+u.get("mtoken"),"Content-Type":"application/json","X-MOLTIN-SDK-LANGUAGE":s.sdk.language,"X-MOLTIN-SDK-VERSION":s.sdk.version};s.application&&(i["X-MOLTIN-APPLICATION"]=s.application),s.currency&&(i["X-MOLTIN-CURRENCY"]=s.currency),o&&(i["X-MOLTIN-CUSTOMER-TOKEN"]=o),fetch(s.protocol+"://"+s.host+"/"+s.version+"/"+t,{method:e.toUpperCase(),headers:i,body:function(t){var e;return t&&(e='{\n      "data": '+JSON.stringify(t)+"\n    }"),e}(r)}).then(n).then(function(t){t.ok&&a(t.json),c(t.json)}).catch(function(t){return c(t)})};return!u.get("mtoken")||Date.now().toString()>=u.get("mexpires")?i.authenticate().then(l).catch(function(t){return c(t)}):l()})};var A=Object.prototype.toString,O=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),j={},P=function(){function t(){O(this,t),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return x(t,null,[{key:"getInstance",value:function(e){return j[e]=j[e]||new t,j[e]}}]),x(t,[{key:"acronym",value:function(t){this.acronyms[t.toLowerCase()]=t;var e=[];for(var r in this.acronyms)c(this.acronyms,r)&&e.push(this.acronyms[r]);this.acronymRegex=new RegExp(e.join("|"))}},{key:"plural",value:function(t,e){"string"==typeof t&&a(this.uncountables,t),a(this.uncountables,e),this.plurals.unshift([t,e])}},{key:"singular",value:function(t,e){"string"==typeof t&&a(this.uncountables,t),a(this.uncountables,e),this.singulars.unshift([t,e])}},{key:"irregular",value:function(t,e){a(this.uncountables,t),a(this.uncountables,e);var r=t[0],n=t.substr(1),o=e[0],i=e.substr(1);if(r.toUpperCase()===o.toUpperCase())this.plural(new RegExp("("+r+")"+n+"$","i"),"$1"+i),this.plural(new RegExp("("+o+")"+i+"$","i"),"$1"+i),this.singular(new RegExp("("+r+")"+n+"$","i"),"$1"+n),this.singular(new RegExp("("+o+")"+i+"$","i"),"$1"+n);else{var s=u(n),c=u(i);this.plural(new RegExp(r.toUpperCase()+s+"$"),o.toUpperCase()+i),this.plural(new RegExp(r.toLowerCase()+s+"$"),o.toLowerCase()+i),this.plural(new RegExp(o.toUpperCase()+c+"$"),o.toUpperCase()+i),this.plural(new RegExp(o.toLowerCase()+c+"$"),o.toLowerCase()+i),this.singular(new RegExp(r.toUpperCase()+s+"$"),r.toUpperCase()+n),this.singular(new RegExp(r.toLowerCase()+s+"$"),r.toLowerCase()+n),this.singular(new RegExp(o.toUpperCase()+c+"$"),r.toUpperCase()+n),this.singular(new RegExp(o.toLowerCase()+c+"$"),r.toLowerCase()+n)}}},{key:"uncountable",value:function(){for(var t=arguments,e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=t[n];this.uncountables=this.uncountables.concat(r)}},{key:"human",value:function(t,e){this.humans.unshift([t,e])}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),t}(),U={en:function(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/^(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/^(m|l)ouse$/i,"$1ice"),t.plural(/^(m|l)ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(ss)$/i,"$1"),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),t.singular(/(^analy)(sis|ses)$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/^(m|l)ice$/i,"$1ouse"),t.singular(/(bus)(es)?$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|test)(is|es)$/i,"$1is"),t.singular(/^(a)x[ie]s$/i,"$1xis"),t.singular(/(octop|vir)(us|i)$/i,"$1us"),t.singular(/(alias|status)(es)?$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("zombie","zombies"),t.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};for(var C in U)l(C,U[C]);var S={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"Th","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ŋ":"NG","ŋ":"ng","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z"},I={},q=(function(){function t(){O(this,t),this.approximations={};for(var e in S)this.approximate(e,S[e])}x(t,null,[{key:"getInstance",value:function(e){return I[e]=I[e]||new t,I[e]}}]),x(t,[{key:"approximate",value:function(t,e){this.approximations[t]=e}},{key:"transliterate",value:function(t,e){var r=this;return t.replace(/[^\u0000-\u007f]/g,function(t){return r.approximations[t]||e||"?"})}}])}(),function(t){this.request=new T(t),this.config=t});q.prototype.All=function(t){void 0===t&&(t=null);var e=this.includes,r=this.sort,n=this.limit,o=this.offset,s=this.filter;return this.call=this.request.send(i(this.endpoint,{includes:e,sort:r,limit:n,offset:o,filter:s}),"GET",void 0,t),this.call},q.prototype.Get=function(t){return this.call=this.request.send(i(this.endpoint+"/"+t,{includes:this.includes}),"GET"),this.call},q.prototype.Limit=function(t){return this.limit=t,this},q.prototype.Offset=function(t){return this.offset=t,this},q.prototype.Sort=function(t){return this.sort=t,this};var R=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.With=function(t){return t&&(this.includes=t.toString().toLowerCase()),this},e}(q),k=function(t){function e(e){t.call(this,e),this.endpoint="products"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Filter=function(t){return this.filter=t,this},e.prototype.CreateRelationships=function(t,e,n){var o=r(e,n);return this.request.send(this.endpoint+"/"+t+"/relationships/"+p(e),"POST",o)},e.prototype.DeleteRelationships=function(t,e,n){var o=r(e,n);return this.request.send(this.endpoint+"/"+t+"/relationships/"+p(e),"DELETE",o)},e.prototype.UpdateRelationships=function(t,e,n){void 0===n&&(n=null);var o=r(e,n);return this.request.send(this.endpoint+"/"+t+"/relationships/"+p(e),"PUT",o)},e}(R),L=function(t){function e(e){t.call(this,e),this.endpoint="currencies",this.storage=new d}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.Set=function(t){var e=this.config,r=this.storage;r.set("mcurrency",t),e.currency=t;return new Promise(function(t,e){var n=r.get("mcurrency");try{t(n)}catch(t){e(new Error(t))}})},e.prototype.Active=function(){var t=this.storage;return new Promise(function(e,r){var n=t.get("mcurrency");try{e(n)}catch(t){r(new Error(t))}})},e}(q),B=function(t){function e(e){t.call(this,e),this.endpoint="brands"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),D=function(t){function e(e){t.call(this,e),this.endpoint="carts",this.cartId=function(){var t=new d,e=E();return null!==t.get("mcart")?t.get("mcart"):(t.set("mcart",e),e)}()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Get=function(t){return void 0===t&&(t=this.cartId),this.request.send(this.endpoint+"/"+t,"GET")},e.prototype.Items=function(t){return void 0===t&&(t=this.cartId),this.request.send(this.endpoint+"/"+t+"/items","GET")},e.prototype.AddProduct=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=this.cartId);var n=s(t,e);return this.request.send(this.endpoint+"/"+r+"/items","POST",n)},e.prototype.AddCustomItem=function(t,e){void 0===e&&(e=this.cartId);var r=Object.assign(t,{type:"custom_item"});return this.request.send(this.endpoint+"/"+e+"/items","POST",r)},e.prototype.AddPromotion=function(t,e){void 0===e&&(e=this.cartId);var r=s(t,null,"promotion_item");return this.request.send(this.endpoint+"/"+e+"/items","POST",r)},e.prototype.RemoveItem=function(t,e){return void 0===e&&(e=this.cartId),this.request.send(this.endpoint+"/"+e+"/items/"+t,"DELETE")},e.prototype.UpdateItemQuantity=function(t,e,r){void 0===r&&(r=this.cartId);var n=s(t,e);return this.request.send(this.endpoint+"/"+r+"/items/"+t,"PUT",n)},e.prototype.Checkout=function(t,e){return void 0===e&&(e=this.cartId),this.request.send(this.endpoint+"/"+e+"/checkout","POST",t)},e.prototype.Delete=function(t){return void 0===t&&(t=this.cartId),this.request.send(this.endpoint+"/"+t,"DELETE")},e}(q),N=function(t){function e(e){t.call(this,e),this.endpoint="categories"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Tree=function(){return this.request.send(this.endpoint+"/tree","GET")},e}(R),G=function(t){function e(e){t.call(this,e),this.endpoint="collections"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(R),F=function(t){function e(e){t.call(this,e),this.endpoint="orders"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Items=function(t){return this.request.send(this.endpoint+"/"+t+"/items","GET")},e.prototype.Payment=function(t,e){return this.request.send(this.endpoint+"/"+t+"/payments","POST",e)},e.prototype.Transactions=function(t){return this.request.send(this.endpoint+"/"+t+"/transactions","GET")},e}(q),M=function(t){function e(e){t.call(this,e),this.endpoint="gateways"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e.prototype.Enabled=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",{type:"gateway",enabled:e})},e}(q),z=function(t){function e(e){t.call(this,e),this.endpoint="customers"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.Create=function(t){return this.request.send(""+this.endpoint,"POST",t)},e.prototype.Delete=function(t){return this.request.send(this.endpoint+"/"+t,"DELETE")},e.prototype.Token=function(t,e){var r={type:"token",email:t,password:e};return this.request.send(this.endpoint+"/tokens","POST",r)},e.prototype.Update=function(t,e){return this.request.send(this.endpoint+"/"+t,"PUT",e)},e}(q),H=function(t){this.config=t,this.request=new T(t),this.storage=new d,this.Products=new k(t),this.Currencies=new L(t),this.Brands=new B(t),this.Cart=new D(t),this.Categories=new N(t),this.Collections=new G(t),this.Orders=new F(t),this.Gateways=new M(t),this.Customers=new z(t)};H.prototype.Authenticate=function(){return this.request.authenticate()};t.default=H,t.gateway=function(t){return new H(new function(t){var e=t.application,r=t.client_id,n=t.client_secret,o=t.currency,i=t.host;this.application=e,this.client_id=r,this.client_secret=n,this.host=i||"api.moltin.com",this.protocol="https",this.version="v2",this.currency=o,this.auth={expires:3600,uri:"oauth/access_token"},this.sdk={version:"0.0.0-semantic-release",language:"JS"}}(t))},Object.defineProperty(t,"__esModule",{value:!0})});
